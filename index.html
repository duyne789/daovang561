<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>â› ÄÃ o VÃ ng</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body {
  margin: 0;
  font-family: Arial;
  background: #f2f2f2;
}
.header {
  background: #ffb703;
  padding: 12px;
  text-align: center;
  font-size: 20px;
  font-weight: bold;
}
.content {
  padding: 15px;
  padding-bottom: 70px;
}
.card {
  background: white;
  padding: 15px;
  border-radius: 12px;
  margin-bottom: 12px;
}
.btn {
  display: inline-block;
  padding: 10px 15px;
  background: #ffb703;
  border-radius: 8px;
  cursor: pointer;
  margin-top: 8px;
}
.nav {
  position: fixed;
  bottom: 0;
  width: 100%;
  background: white;
  border-top: 1px solid #ddd;
  display: flex;
}
.nav div {
  flex: 1;
  text-align: center;
  padding: 10px 0;
  cursor: pointer;
  font-size: 14px;
}
.nav div.active {
  color: #ffb703;
  font-weight: bold;
}
</style>
</head>
<body>

<div class="header">â› ÄÃ o VÃ ng</div>

<div class="content">

  <div id="tab-mine" class="tab">
    <div class="card">
      <h3>Sá»‘ vÃ ng cá»§a báº¡n</h3>
      <div id="gold" style="font-size:24px;font-weight:bold;color:#ffb703">0</div>
      <div class="btn" onclick="mine()">â› ÄÃ o vÃ ng</div>
    </div>
  </div>

  <div id="tab-redeem" class="tab" style="display:none">
    <div class="card">
      <h3>Äá»•i thÆ°á»Ÿng</h3>
      <p>2000 vÃ ng = 1000 VNÄ (demo)</p>
      <div class="btn" onclick="redeem()">ğŸ Äá»•i ngay</div>
    </div>
  </div>

  <div id="tab-task" class="tab" style="display:none">
    <div class="card">
      <h3>Nhiá»‡m vá»¥</h3>
      <p>ÄÃ o 5 láº§n trong ngÃ y â†’ +100 vÃ ng</p>
      <div class="btn" onclick="completeTask()">Nháº­n thÆ°á»Ÿng</div>
    </div>
  </div>

  <div id="tab-ref" class="tab" style="display:none">
    <div class="card">
      <h3>Má»i báº¡n</h3>
      <p>Link má»i cá»§a báº¡n:</p>
      <input id="ref" readonly style="width:100%">
      <div class="btn" onclick="copyRef()">ğŸ“‹ Copy link</div>
    </div>
  </div>

</div>

<div class="nav">
  <div onclick="showTab('mine')" class="active">â› ÄÃ o</div>
  <div onclick="showTab('redeem')">ğŸ Äá»•i</div>
  <div onclick="showTab('task')">ğŸ“‹ Nhiá»‡m vá»¥</div>
  <div onclick="showTab('ref')">ğŸ‘¥ Má»i</div>
</div>

<script>
const tg = Telegram.WebApp;
tg.expand();

let gold = Number(localStorage.getItem("gold")) || 0;
let minesToday = Number(localStorage.getItem("mines")) || 0;
updateGold();

document.getElementById("ref").value = location.href + "?ref=" + (tg.initDataUnsafe?.user?.id || "guest");

function updateGold() {
  document.getElementById("gold").innerText = gold + " vÃ ng";
  localStorage.setItem("gold", gold);
}

function mine() {
  const earn = Math.floor(Math.random()*40)+10;
  gold += earn;
  minesToday++;
  localStorage.setItem("mines", minesToday);
  updateGold();
  alert("Báº¡n Ä‘Ã o Ä‘Æ°á»£c " + earn + " vÃ ng");
}

function redeem() {
  if (gold >= 2000) {
    gold -= 2000;
    updateGold();
    alert("Äá»•i thÃ nh cÃ´ng (demo)");
  } else alert("ChÆ°a Ä‘á»§ vÃ ng");
}

function completeTask() {
  if (minesToday >= 5) {
    gold += 100;
    minesToday = 0;
    localStorage.setItem("mines", 0);
    updateGold();
    alert("ÄÃ£ nháº­n 100 vÃ ng!");
  } else alert("ChÆ°a Ä‘á»§ lÆ°á»£t Ä‘Ã o");
}

function copyRef() {
  navigator.clipboard.writeText(document.getElementById("ref").value);
  alert("ÄÃ£ copy link má»i!");
}

function showTab(name) {
  document.querySelectorAll(".tab").forEach(t => t.style.display="none");
  document.getElementById("tab-"+name).style.display = "block";
  document.querySelectorAll(".nav div").forEach(d=>d.classList.remove("active"));
  event.target.classList.add("active");
}
</script>

</body>
</html>
